@model PasswordManeger.ViewModels.DashBoardViewModel
@using PasswordManeger.ViewModels

<div class="position-relative">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Сервис</th>
                <th>Пароль</th>
                <th>Ссылка</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var password in Model.Passwords)
            {
                <tr>
                    <td>@password.ServiceName</td>
                    <td>@password.Password</td>
                    <td><a href="@password.Link" target="_blank">@password.Link</a></td>
                    <td>
                        <form asp-action="DeletePassword" method="post" style="display:inline;">
                            <input type="hidden" name="id" value="@password.Id" />
                            <button type="submit" class="btn btn-danger btn-sm"
                                    onclick="return confirm('Вы уверены, что хотите удалить этот пароль?');">
                                Удалить
                            </button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <!-- Кнопка добавления пароля -->
    <div class="position-absolute bottom-0 end-0 me-3 mb-3">
        <button type="button" class="btn btn-primary btn-lg rounded-circle"
                data-bs-toggle="modal" data-bs-target="#addPasswordModal">
            +
        </button>
    </div>
</div>

<!-- Модальное окно -->
<div class="modal fade" id="addPasswordModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            @* Явное приведение Html, чтобы PartialAsync работал с динамикой *@
            @await ((IHtmlHelper)Html).PartialAsync("_AddPasswordPartial", Model.NewPassword)
        </div>
    </div>
</div>
